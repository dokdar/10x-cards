---
import Layout from "../layouts/Layout.astro";
import AIGeneratorView from "../components/views/AIGeneratorView";
import { isFeatureAvailable } from "@/features/astro";

// Check if generations feature is enabled
const isGenerationsEnabled = isFeatureAvailable("generations");
if (!isGenerationsEnabled) {
  return Astro.redirect("/");
}

// Server-side authentication guard
const { user } = Astro.locals;

if (!user) {
  return Astro.redirect("/login");
}

const title = "Generator AI - 10x Cards";
const description = "Wygeneruj fiszki z tekstu przy pomocy AI";

export const prerender = false;
---

<Layout title={title} description={description}>
  <AIGeneratorView client:load />
</Layout>
