---
import Layout from "../../layouts/Layout.astro";
import { ReviewView } from "../../components/views/ReviewView";
import { isFeatureAvailable } from "@/features/astro";

export const prerender = false;

// Check if flashcards feature is enabled
const isFlashcardsEnabled = isFeatureAvailable("flashcards");
if (!isFlashcardsEnabled) {
  return Astro.redirect("/");
}

// Server-side authentication guard
const { user } = Astro.locals;

if (!user) {
  return Astro.redirect("/login");
}

const { id } = Astro.params;

const title = "Recenzja fiszek - 10x Cards";
const description = "Przejrzyj i zaakceptuj wygenerowane fiszki";
---

<Layout title={title} description={description}>
  <ReviewView client:load generationId={id} />
</Layout>
